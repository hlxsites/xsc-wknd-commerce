{"version":3,"file":"render.js","sources":["../src/render/Provider.tsx","../src/render/render.tsx"],"sourcesContent":["import { FunctionComponent } from 'preact';\nimport { useState, useEffect } from 'preact/hooks';\nimport { UIProvider } from '@adobe/elsie/components';\nimport { Lang } from '@adobe/elsie/i18n';\nimport { events } from '@adobe/event-bus';\nimport { config } from '../api';\nimport { deepmerge } from '@adobe/elsie/lib';\n\nimport en_US from '../i18n/en_US.json';\n\n// Langs\nconst langDefinitions = {\n  default: en_US,\n};\n\ninterface CartProviderProps {\n  children?: any;\n}\n\nexport const Provider: FunctionComponent<CartProviderProps> = ({\n  children,\n}) => {\n  const [locale, setLang] = useState<Lang>();\n\n  const userLangDefinitions = config.getConfig()?.langDefinitions;\n\n  //   Events\n  useEffect(() => {\n    const localeEvent = events.on(\n      'locale',\n      (payload) => {\n        if (payload !== locale) setLang(payload as Lang);\n      },\n      { eager: true }\n    );\n    return () => {\n      localeEvent?.off();\n    };\n  }, [locale]);\n\n  // Merge language definitions with user language definitions\n  const definitions = deepmerge(langDefinitions, userLangDefinitions ?? {});\n\n  return (\n    <UIProvider lang={locale} langDefinitions={definitions}>\n      {children}\n    </UIProvider>\n  );\n};\n","import { Render } from '@adobe/elsie/lib';\nimport { Provider } from './Provider';\n\nexport const render = new Render(<Provider />);\n"],"names":["langDefinitions","default","en_US","Provider","children","locale","setLang","useState","userLangDefinitions","config","getConfig","useEffect","localeEvent","events","on","payload","eager","off","definitions","deepmerge","_jsx","UIProvider","lang","render","Render"],"mappings":"iiCAWMA,EAAkB,CACtBC,QAASC,CACX,EAMaC,EAAiDA,CAAC,CAC7DC,SAAAA,CACF,IAAM,OACJ,KAAM,CAACC,EAAQC,CAAO,EAAIC,EAAe,EAEnCC,GAAsBC,EAAAA,EAAOC,UAAAA,IAAPD,YAAAA,EAAoBT,gBAGhDW,EAAU,IAAM,CACd,MAAMC,EAAcC,EAAOC,GACzB,SACaC,GAAA,CACPA,IAAYV,GAAQC,EAAQS,CAAgB,CAAA,EAElD,CAAEC,MAAO,EAAA,CACX,EACA,MAAO,IAAM,CACXJ,GAAAA,MAAAA,EAAaK,KAAI,CACnB,EACC,CAACZ,CAAM,CAAC,EAGX,MAAMa,EAAcC,EAAUnB,EAAiBQ,GAAuB,CAAE,CAAA,EAExE,OACEY,EAACC,EAAU,CAACC,KAAMjB,EAAQL,gBAAiBkB,EAAYd,SAAAA,CAAAA,CAE3C,CAEhB,EC7CamB,EAAS,IAAIC,EAAOJ,EAACjB,EAAU,CAAA,CAAA,CAAC"}